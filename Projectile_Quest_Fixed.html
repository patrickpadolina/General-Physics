

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Quest: Master the Motion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f4f8;
            overflow-x: hidden;
        }
        
        .stage-container {
            display: none;
        }
        
        .stage-container.active {
            display: block;
        }
        
        .marker {
            cursor: grab;
            user-select: none;
        }
        
        .marker:active {
            cursor: grabbing;
        }
        
        .projectile-path {
            stroke-dasharray: 5;
            animation: dash 1s linear infinite;
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: -10;
            }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            transform-origin: center;
            opacity: 0;
        }
        
        @keyframes explode {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty));
                opacity: 0;
            }
        }
        
        .badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .feedback-message {
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(10px);
        }
        
        .feedback-message.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-blue-600 text-white p-4">
            <div class="container mx-auto flex justify-between items-center">
                <h1 class="text-2xl md:text-3xl font-bold">Projectile Quest: Master the Motion</h1>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:block">
                        <span class="font-semibold" id="current-stage">Stage 1/5</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto p-4">
            <!-- Stage 1: Ball Rolling Off Table -->
            <div id="stage1" class="stage-container active">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h2 class="text-xl md:text-2xl font-bold text-blue-700 mb-4">Stage 1: Ball Rolling Off Table</h2>
                    <p class="mb-6 text-gray-700">A ball is with a velocity of 3.15 m/s is about to roll off a horizontal table that is 1.5 meters high. Predict where it will land.</p>
                    
                    <div class="relative bg-gray-100 rounded-lg p-4 h-[400px] mb-6 overflow-hidden">
                        <!-- Physics Simulation -->
                        <svg width="100%" height="100%" viewBox="0 0 800 400" class="simulation-svg">
                            <!-- Table -->
                            <rect x="50" y="100" width="200" height="20" fill="#8B4513" stroke="#5D2906" stroke-width="2"/>
                            <rect x="60" y="120" width="15" height="150" fill="#8B4513" stroke="#5D2906" stroke-width="2"/>
                            <rect x="225" y="120" width="15" height="150" fill="#8B4513" stroke="#5D2906" stroke-width="2"/>
                            
                            <!-- Ball -->
                            <circle id="ball" cx="250" cy="100" r="15" fill="#E53E3E" stroke="#742A2A" stroke-width="2"/>
                            
                            <!-- Ground -->
                            <line x1="0" y1="270" x2="800" y2="270" stroke="#333" stroke-width="2"/>
                            
                            <!-- Distance Markers -->
                            <line x1="250" y1="270" x2="250" y2="280" stroke="#333" stroke-width="2"/>
                            <text x="250" y="295" text-anchor="middle" fill="#333" font-size="14">0</text>
                            
                            <line x1="350" y1="270" x2="350" y2="280" stroke="#333" stroke-width="2"/>
                            <text x="350" y="295" text-anchor="middle" fill="#333" font-size="14">1</text>
                            
                            <line x1="450" y1="270" x2="450" y2="280" stroke="#333" stroke-width="2"/>
                            <text x="450" y="295" text-anchor="middle" fill="#333" font-size="14">2</text>
                            
                            <line x1="550" y1="270" x2="550" y2="280" stroke="#333" stroke-width="2"/>
                            <text x="550" y="295" text-anchor="middle" fill="#333" font-size="14">3</text>
                            
                            <line x1="650" y1="270" x2="650" y2="280" stroke="#333" stroke-width="2"/>
                            <text x="650" y="295" text-anchor="middle" fill="#333" font-size="14">4</text>
                            
                            <line x1="750" y1="270" x2="750" y2="280" stroke="#333" stroke-width="2"/>
                            <text x="750" y="295" text-anchor="middle" fill="#333" font-size="14">5</text>
                            
                            <!-- Y-axis line -->
                            <line x1="40" y1="50" x2="40" y2="270" stroke="#333" stroke-width="2"/>
                            
                            <!-- Height Markers -->
                            <line x1="35" y1="270" x2="45" y1="270" stroke="#333" stroke-width="2"/>
                            <text x="30" y="275" text-anchor="end" fill="#333" font-size="14">0</text>
                            
                            <line x1="35" y1="220" x2="45" y1="220" stroke="#333" stroke-width="2"/>
                            <text x="30" y="225" text-anchor="end" fill="#333" font-size="14">0.5</text>
                            
                            <line x1="35" y1="170" x2="45" y1="170" stroke="#333" stroke-width="2"/>
                            <text x="30" y="175" text-anchor="end" fill="#333" font-size="14">1.0</text>
                            
                            <line x1="35" y1="120" x2="45" y1="120" stroke="#333" stroke-width="2"/>
                            <text x="30" y="125" text-anchor="end" fill="#333" font-size="14">1.5</text>
                            
                            <line x1="35" y1="70" x2="45" y1="70" stroke="#333" stroke-width="2"/>
                            <text x="30" y="75" text-anchor="end" fill="#333" font-size="14">2.0</text>
                            
                            <!-- Height Label -->
                            <text x="15" y="160" text-anchor="middle" fill="#333" font-size="14" transform="rotate(-90, 15, 160)" style="white-space: nowrap;">Height (m)</text>
                            
                            <!-- Distance Label -->
                            <text x="400" y="320" text-anchor="middle" fill="#333" font-size="16" font-weight="bold">Distance (m)</text>
                            
                            <!-- Landing Marker (draggable) -->
                            <g id="landing-marker" class="marker" transform="translate(450, 270)" data-x="450">
                                <circle cx="0" cy="0" r="15" fill="#FEFCBF" stroke="#000" stroke-width="2"/>
                                <text x="0" y="5" text-anchor="middle" fill="#000" font-size="18" font-weight="bold">?</text>
                            </g>
                            
                            <!-- Table Height Label -->
                            <text x="140" y="80" text-anchor="middle" fill="#333" font-size="14" font-weight="bold">Table (1.5m high)</text>
                        </svg>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-100 rounded-lg p-4">
                            <h3 class="text-lg font-bold text-gray-800 mb-2">Time to hit the ground</h3>
                            <div class="flex items-center">
                                <input type="number" step="0.01" id="time-input" class="w-24 p-2 border border-gray-300 rounded mr-2" placeholder="0.00">
                                <span class="text-gray-700">seconds</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 rounded-lg p-4">
                            <h3 class="text-lg font-bold text-gray-800 mb-2">Your Landing Guess</h3>
                            <div class="flex items-center">
                                <span id="landing-distance" class="text-gray-700">2.00 meters</span>
                                <span class="ml-2 text-sm text-gray-500">(drag the yellow marker)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="feedback-stage1" class="mt-4 p-3 rounded-lg text-center feedback-message">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
                
                <div class="flex justify-end">
                    <button id="check-stage1" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Check Answer
                    </button>
                </div>
            </div>

            <!-- Stage 2: Angled Kick - High Arc Soccer -->
            <div id="stage2" class="stage-container">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h2 class="text-xl md:text-2xl font-bold text-blue-700 mb-4">Stage 2: High Arc Soccer</h2>
                    <p class="mb-6 text-gray-700">A soccer ball is kicked with a velocity of 25 m/s at an angle of 60° above the horizontal.</p>
                    
                    <div class="relative bg-gray-100 rounded-lg p-4 h-[400px] mb-6 overflow-hidden">
                        <!-- Physics Simulation -->
                        <svg width="100%" height="100%" viewBox="0 0 800 400" class="simulation-svg">
                            <!-- Ground -->
                            <line x1="0" y1="350" x2="800" y2="350" stroke="#333" stroke-width="2"/>
                            
                            <!-- Y-axis line -->
                            <line x1="50" y1="50" x2="50" y2="350" stroke="#333" stroke-width="2"/>
                            
                            <!-- Starting Point -->
                            <circle cx="100" cy="350" r="5" fill="#333"/>
                            
                            <!-- Trajectory Path -->
                            <path d="M100,350 Q 300,100 550,350" stroke="#3B82F6" stroke-width="2" fill="none" class="projectile-path"/>
                            
                            <!-- Soccer Ball -->
                            <g id="soccer-ball" transform="translate(100, 350)">
                                <circle cx="0" cy="0" r="15" fill="white" stroke="#333" stroke-width="1"/>
                                <path d="M-7,-7 L7,7 M-7,7 L7,-7" stroke="#333" stroke-width="1"/>
                                <circle cx="0" cy="0" r="15" fill="none" stroke="#333" stroke-width="2"/>
                            </g>
                            
                            <!-- Angle Indicator -->
                            <path d="M100,350 L150,350 A 50,50 0 0,0 125,307" stroke="#E53E3E" stroke-width="2" fill="none"/>
                            <text x="135" y="330" text-anchor="middle" fill="#E53E3E" font-size="14" font-weight="bold">60°</text>
                            
                            <!-- Velocity Indicator -->
                            <line x1="100" y1="350" x2="150" y2="307" stroke="#E53E3E" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="140" y="300" text-anchor="middle" fill="#E53E3E" font-size="14" font-weight="bold">25 m/s</text>
                            
                            <!-- Distance Markers -->
                            <line x1="100" y1="350" x2="100" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="100" y="375" text-anchor="middle" fill="#333" font-size="14">0</text>
                            
                            <line x1="200" y1="350" x2="200" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="200" y="375" text-anchor="middle" fill="#333" font-size="14">10</text>
                            
                            <line x1="300" y1="350" x2="300" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="300" y="375" text-anchor="middle" fill="#333" font-size="14">20</text>
                            
                            <line x1="400" y1="350" x2="400" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="400" y="375" text-anchor="middle" fill="#333" font-size="14">30</text>
                            
                            <line x1="500" y1="350" x2="500" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="500" y="375" text-anchor="middle" fill="#333" font-size="14">40</text>
                            
                            <line x1="600" y1="350" x2="600" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="600" y="375" text-anchor="middle" fill="#333" font-size="14">50</text>
                            
                            <line x1="700" y1="350" x2="700" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="700" y="375" text-anchor="middle" fill="#333" font-size="14">60</text>
                            
                            <!-- Height Markers - Straight line labels -->
                            <line x1="40" y1="350" x2="60" y1="350" stroke="#333" stroke-width="2"/>
                            <text x="35" y="355" text-anchor="end" fill="#333" font-size="14">0</text>
                            
                            <line x1="40" y1="300" x2="60" y1="300" stroke="#333" stroke-width="2"/>
                            <text x="35" y="305" text-anchor="end" fill="#333" font-size="14">5</text>
                            
                            <line x1="40" y1="250" x2="60" y1="250" stroke="#333" stroke-width="2"/>
                            <text x="35" y="255" text-anchor="end" fill="#333" font-size="14">10</text>
                            
                            <line x1="40" y1="200" x2="60" y1="200" stroke="#333" stroke-width="2"/>
                            <text x="35" y="205" text-anchor="end" fill="#333" font-size="14">15</text>
                            
                            <line x1="40" y1="150" x2="60" y1="150" stroke="#333" stroke-width="2"/>
                            <text x="35" y="155" text-anchor="end" fill="#333" font-size="14">20</text>
                            
                            <line x1="40" y1="100" x2="60" y1="100" stroke="#333" stroke-width="2"/>
                            <text x="35" y="105" text-anchor="end" fill="#333" font-size="14">25</text>
                            
                            <!-- Height Label - Single straight line -->
                            <text x="15" y="200" text-anchor="middle" fill="#333" font-size="14" transform="rotate(-90, 15, 200)" style="white-space: nowrap;">Height (m)</text>
                            
                            <!-- Distance Label -->
                            <text x="400" y="395" text-anchor="middle" fill="#333" font-size="16" font-weight="bold">Distance (m)</text>
                            
                            <!-- Landing Marker (draggable) -->
                            <g id="landing-marker-stage2" class="marker" transform="translate(550, 350)" data-x="550">
                                <circle cx="0" cy="0" r="15" fill="#FEFCBF" stroke="#000" stroke-width="2"/>
                                <text x="0" y="5" text-anchor="middle" fill="#000" font-size="18" font-weight="bold">?</text>
                            </g>
                            
                            <!-- Max Height Marker (draggable) -->
                            <g id="max-height-marker" class="marker" transform="translate(300, 150)" data-x="300" data-y="150">
                                <circle cx="0" cy="0" r="15" fill="#FED7AA" stroke="#000" stroke-width="2"/>
                                <text x="0" y="5" text-anchor="middle" fill="#000" font-size="18" font-weight="bold">↑</text>
                            </g>
                        </svg>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-gray-100 rounded-lg p-4">
                            <h3 class="text-lg font-bold text-gray-800 mb-2">Time to hit the ground</h3>
                            <div class="flex items-center">
                                <input type="number" step="0.01" id="time-input-stage2" class="w-24 p-2 border border-gray-300 rounded mr-2" placeholder="0.00">
                                <span class="text-gray-700">seconds</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 rounded-lg p-4">
                            <h3 class="text-lg font-bold text-gray-800 mb-2">Your Landing Guess</h3>
                            <div class="flex items-center">
                                <span id="landing-distance-stage2" class="text-gray-700">45.00 meters</span>
                                <span class="ml-2 text-sm text-gray-500">(drag the yellow marker)</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 rounded-lg p-4">
                            <h3 class="text-lg font-bold text-gray-800 mb-2">Max Height Guess</h3>
                            <div class="flex items-center">
                                <span id="max-height-value" class="text-gray-700">20.00 meters</span>
                                <span class="ml-2 text-sm text-gray-500">(drag the orange marker)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="feedback-stage2" class="mt-4 p-3 rounded-lg text-center feedback-message">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
                
                <div class="flex justify-between">
                    <button id="back-to-stage1" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Back
                    </button>
                    <button id="check-stage2" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Check Answer
                    </button>
                </div>
            </div>

            <!-- Stage 3: The Cannon - Find the Initial Velocity -->
            <div id="stage3" class="stage-container">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h2 class="text-xl md:text-2xl font-bold text-blue-700 mb-4">Stage 3: The Cannon</h2>
                    <p class="mb-6 text-gray-700">A cannonball is fired at an angle of 37° and lands 500 meters away on level ground after 10 seconds in the air.</p>
                    
                    <div class="relative bg-gray-100 rounded-lg p-4 h-[400px] mb-6 overflow-hidden">
                        <!-- Physics Simulation -->
                        <svg width="100%" height="100%" viewBox="0 0 800 400" class="simulation-svg">
                            <!-- Ground -->
                            <line x1="0" y1="350" x2="800" y2="350" stroke="#333" stroke-width="2"/>
                            
                            <!-- Y-axis line -->
                            <line x1="50" y1="50" x2="50" y2="350" stroke="#333" stroke-width="2"/>
                            
                            <!-- Cannon -->
                            <rect x="50" y="320" width="60" height="30" fill="#555" stroke="#333" stroke-width="2" rx="5"/>
                            <rect x="70" y="290" width="60" height="20" fill="#777" stroke="#333" stroke-width="2" transform="rotate(-37, 70, 300)" rx="3"/>
                            
                            <!-- Trajectory Path -->
                            <path d="M110,290 Q 350,150 650,350" stroke="#3B82F6" stroke-width="2" fill="none" class="projectile-path"/>
                            
                            <!-- Cannonball -->
                            <circle cx="110" cy="290" r="10" fill="#333" stroke="#000" stroke-width="1"/>
                            
                            <!-- Target -->
                            <line x1="650" y1="330" x2="650" y2="350" stroke="#E53E3E" stroke-width="2"/>
                            <circle cx="650" cy="350" r="5" fill="#E53E3E"/>
                            <text x="650" y="325" text-anchor="middle" fill="#E53E3E" font-size="14" font-weight="bold">500m</text>
                            
                            <!-- Angle Indicator -->
                            <path d="M70,300 L120,300 A 50,50 0 0,0 110,260" stroke="#E53E3E" stroke-width="2" fill="none"/>
                            <text x="105" y="280" text-anchor="middle" fill="#E53E3E" font-size="14" font-weight="bold">37°</text>
                            
                            <!-- Flight Time -->
                            <text x="400" y="200" text-anchor="middle" fill="#3B82F6" font-size="16" font-weight="bold">Flight Time: 10 seconds</text>
                            
                            <!-- Distance Markers -->
                            <line x1="100" y1="350" x2="100" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="100" y="375" text-anchor="middle" fill="#333" font-size="14">0</text>
                            
                            <line x1="200" y1="350" x2="200" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="200" y="375" text-anchor="middle" fill="#333" font-size="14">100</text>
                            
                            <line x1="300" y1="350" x2="300" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="300" y="375" text-anchor="middle" fill="#333" font-size="14">200</text>
                            
                            <line x1="400" y1="350" x2="400" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="400" y="375" text-anchor="middle" fill="#333" font-size="14">300</text>
                            
                            <line x1="500" y1="350" x2="500" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="500" y="375" text-anchor="middle" fill="#333" font-size="14">400</text>
                            
                            <line x1="600" y1="350" x2="600" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="600" y="375" text-anchor="middle" fill="#333" font-size="14">500</text>
                            
                            <line x1="700" y1="350" x2="700" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="700" y="375" text-anchor="middle" fill="#333" font-size="14">600</text>
                            
                            <!-- Height Markers - Straight line labels -->
                            <line x1="40" y1="350" x2="60" y1="350" stroke="#333" stroke-width="2"/>
                            <text x="35" y="355" text-anchor="end" fill="#333" font-size="14">0</text>
                            
                            <line x1="40" y1="300" x2="60" y1="300" stroke="#333" stroke-width="2"/>
                            <text x="35" y="305" text-anchor="end" fill="#333" font-size="14">25</text>
                            
                            <line x1="40" y1="250" x2="60" y1="250" stroke="#333" stroke-width="2"/>
                            <text x="35" y="255" text-anchor="end" fill="#333" font-size="14">50</text>
                            
                            <line x1="40" y1="200" x2="60" y1="200" stroke="#333" stroke-width="2"/>
                            <text x="35" y="205" text-anchor="end" fill="#333" font-size="14">75</text>
                            
                            <line x1="40" y1="150" x2="60" y1="150" stroke="#333" stroke-width="2"/>
                            <text x="35" y="155" text-anchor="end" fill="#333" font-size="14">100</text>
                            
                            <line x1="40" y1="100" x2="60" y1="100" stroke="#333" stroke-width="2"/>
                            <text x="35" y="105" text-anchor="end" fill="#333" font-size="14">125</text>
                            
                            <!-- Height Label - Single straight line -->
                            <text x="15" y="200" text-anchor="middle" fill="#333" font-size="14" transform="rotate(-90, 15, 200)" style="white-space: nowrap;">Height (m)</text>
                            
                            <!-- Distance Label -->
                            <text x="400" y="395" text-anchor="middle" fill="#333" font-size="16" font-weight="bold">Distance (m)</text>
                        </svg>
                    </div>
                    
                    <div class="bg-gray-100 rounded-lg p-4">
                        <h3 class="text-lg font-bold text-gray-800 mb-2">Initial Velocity</h3>
                        <div class="flex items-center">
                            <input type="number" step="0.1" id="velocity-input" class="w-24 p-2 border border-gray-300 rounded mr-2" placeholder="0.0">
                            <span class="text-gray-700">m/s</span>
                        </div>
                    </div>
                    
                    <div id="feedback-stage3" class="mt-4 p-3 rounded-lg text-center feedback-message">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
                
                <div class="flex justify-between">
                    <button id="back-to-stage2" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Back
                    </button>
                    <button id="check-stage3" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Check Answer
                    </button>
                </div>
            </div>

            <!-- Stage 4: Mystery Launcher - Find the Launch Angle -->
            <div id="stage4" class="stage-container">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h2 class="text-xl md:text-2xl font-bold text-blue-700 mb-4">Stage 4: Mystery Launcher</h2>
                    <p class="mb-6 text-gray-700">A projectile is launched at an unknown angle with a speed of 30 m/s and lands 78 meters away on level ground.</p>
                    
                    <div class="relative bg-gray-100 rounded-lg p-4 h-[400px] mb-6 overflow-hidden">
                        <!-- Physics Simulation -->
                        <svg width="100%" height="100%" viewBox="0 0 800 400" class="simulation-svg">
                            <!-- Ground -->
                            <line x1="0" y1="350" x2="800" y2="350" stroke="#333" stroke-width="2"/>
                            
                            <!-- Y-axis line -->
                            <line x1="50" y1="50" x2="50" y2="350" stroke="#333" stroke-width="2"/>
                            
                            <!-- Launcher -->
                            <circle cx="100" cy="350" r="15" fill="#555" stroke="#333" stroke-width="2"/>
                            <rect x="100" y="340" width="40" height="10" fill="#777" stroke="#333" stroke-width="2" rx="2"/>
                            
                            <!-- Trajectory Path (will be updated based on angle) -->
                            <path d="M100,350 Q 200,250 300,350" stroke="#3B82F6" stroke-width="2" fill="none" class="projectile-path"/>
                            
                            <!-- Projectile -->
                            <circle cx="100" cy="350" r="8" fill="#E53E3E" stroke="#742A2A" stroke-width="1"/>
                            
                            <!-- Target -->
                            <line x1="300" y1="330" x2="300" y2="350" stroke="#E53E3E" stroke-width="2"/>
                            <circle cx="300" cy="350" r="5" fill="#E53E3E"/>
                            <text x="300" y="325" text-anchor="middle" fill="#E53E3E" font-size="14" font-weight="bold">78m</text>
                            
                            <!-- Initial Speed -->
                            <text x="100" y="300" text-anchor="start" fill="#3B82F6" font-size="14" font-weight="bold">Initial Speed: 30 m/s</text>
                            
                            <!-- Question Mark for Angle -->
                            <text x="140" y="330" text-anchor="middle" fill="#E53E3E" font-size="20" font-weight="bold">?°</text>
                            
                            <!-- Distance Markers -->
                            <line x1="100" y1="350" x2="100" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="100" y="375" text-anchor="middle" fill="#333" font-size="14">0</text>
                            
                            <line x1="200" y1="350" x2="200" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="200" y="375" text-anchor="middle" fill="#333" font-size="14">40</text>
                            
                            <line x1="300" y1="350" x2="300" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="300" y="375" text-anchor="middle" fill="#333" font-size="14">78</text>
                            
                            <line x1="400" y1="350" x2="400" y2="360" stroke="#333" stroke-width="2"/>
                            <text x="400" y="375" text-anchor="middle" fill="#333" font-size="14">120</text>
                            
                            <!-- Height Markers - Straight line labels -->
                            <line x1="40" y1="350" x2="60" y1="350" stroke="#333" stroke-width="2"/>
                            <text x="35" y="355" text-anchor="end" fill="#333" font-size="14">0</text>
                            
                            <line x1="40" y1="300" x2="60" y1="300" stroke="#333" stroke-width="2"/>
                            <text x="35" y="305" text-anchor="end" fill="#333" font-size="14">10</text>
                            
                            <line x1="40" y1="250" x2="60" y1="250" stroke="#333" stroke-width="2"/>
                            <text x="35" y="255" text-anchor="end" fill="#333" font-size="14">20</text>
                            
                            <line x1="40" y1="200" x2="60" y1="200" stroke="#333" stroke-width="2"/>
                            <text x="35" y="205" text-anchor="end" fill="#333" font-size="14">30</text>
                            
                            <line x1="40" y1="150" x2="60" y1="150" stroke="#333" stroke-width="2"/>
                            <text x="35" y="155" text-anchor="end" fill="#333" font-size="14">40</text>
                            
                            <line x1="40" y1="100" x2="60" y1="100" stroke="#333" stroke-width="2"/>
                            <text x="35" y="105" text-anchor="end" fill="#333" font-size="14">50</text>
                            
                            <!-- Height Label - Single straight line -->
                            <text x="15" y="200" text-anchor="middle" fill="#333" font-size="14" transform="rotate(-90, 15, 200)" style="white-space: nowrap;">Height (m)</text>
                            
                            <!-- Distance Label -->
                            <text x="250" y="395" text-anchor="middle" fill="#333" font-size="16" font-weight="bold">Distance (m)</text>
                        </svg>
                    </div>
                    
                    <div class="bg-gray-100 rounded-lg p-4">
                        <h3 class="text-lg font-bold text-gray-800 mb-2">Launch Angle</h3>
                        <div class="flex items-center">
                            <input type="number" step="0.1" id="angle-input" class="w-24 p-2 border border-gray-300 rounded mr-2" placeholder="0.0">
                            <span class="text-gray-700">degrees</span>
                        </div>
                    </div>
                    
                    <div id="feedback-stage4" class="mt-4 p-3 rounded-lg text-center feedback-message">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
                
                <div class="flex justify-between">
                    <button id="back-to-stage3" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Back
                    </button>
                    <button id="check-stage4" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200">
                        Check Answer
                    </button>
                </div>
            </div>

            <!-- End Game Reward -->
            <div id="reward-screen" class="stage-container">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6 text-center relative overflow-hidden">
                    <div id="confetti-container" class="absolute inset-0 overflow-hidden"></div>
                    
                    <h2 class="text-3xl md:text-4xl font-bold text-blue-700 mb-6 relative z-10">You Are a Projectile Master!</h2>
                    
                    <div class="flex justify-center mb-8">
                        <div class="badge w-48 h-48 bg-yellow-100 rounded-full flex items-center justify-center border-4 border-yellow-500 relative z-10">
                            <div class="text-center">
                                <svg class="w-16 h-16 mx-auto mb-2 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <span class="text-xl font-bold text-yellow-800">Projectile Master</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 rounded-lg p-6 max-w-md mx-auto mb-8 relative z-10">
                        <h3 class="text-xl font-bold text-blue-800 mb-4">Performance Summary</h3>
                        
                        <div class="grid grid-cols-2 gap-4 text-left">
                            <div class="font-semibold text-gray-700">Stage 1:</div>
                            <div class="text-right">
                                <span id="stage1-time" class="font-mono">00:45</span> | 
                                <span id="stage1-accuracy" class="text-green-600 font-bold">92%</span>
                            </div>
                            
                            <div class="font-semibold text-gray-700">Stage 2:</div>
                            <div class="text-right">
                                <span id="stage2-time" class="font-mono">01:12</span> | 
                                <span id="stage2-accuracy" class="text-green-600 font-bold">88%</span>
                            </div>
                            
                            <div class="font-semibold text-gray-700">Stage 3:</div>
                            <div class="text-right">
                                <span id="stage3-time" class="font-mono">00:58</span> | 
                                <span id="stage3-accuracy" class="text-green-600 font-bold">95%</span>
                            </div>
                            
                            <div class="font-semibold text-gray-700">Stage 4:</div>
                            <div class="text-right">
                                <span id="stage4-time" class="font-mono">01:05</span> | 
                                <span id="stage4-accuracy" class="text-green-600 font-bold">90%</span>
                            </div>
                            
                            <div class="font-semibold text-gray-700 col-span-2 pt-2 border-t border-blue-200 mt-2">
                                Overall Accuracy: <span id="overall-accuracy" class="text-green-600 font-bold">91%</span>
                            </div>
                        </div>
                    </div>
                    
                    <button id="play-again" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-200 relative z-10">
                        Play Again
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white p-4 mt-8">
            <div class="container mx-auto text-center">
                <p>Projectile Quest: Master the Motion | Educational Physics Game</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Stage Management
            const stages = ['stage1', 'stage2', 'stage3', 'stage4', 'reward-screen'];
            let currentStageIndex = 0;
            
            // Correct answers for each stage
            const correctAnswers = {
                stage1: {
                    time: 0.55, // seconds, with tolerance
                    distance: 1.73 // meters, with tolerance
                },
                stage2: {
                    time: 4.42, // seconds, with tolerance
                    distance: 54.1, // meters, with tolerance
                    maxHeight: 22.3 // meters, with tolerance
                },
                stage3: {
                    velocity: 52.6 // m/s, with tolerance
                },
                stage4: {
                    angle: 29 // degrees, with tolerance
                }
            };
            
            // Tolerance for answers (percentage)
            const tolerance = 5; // 5% tolerance
            
            function showStage(index) {
                // Hide all stages
                document.querySelectorAll('.stage-container').forEach(stage => {
                    stage.classList.remove('active');
                });
                
                // Show the selected stage
                document.getElementById(stages[index]).classList.add('active');
                
                // Update the stage indicator
                document.getElementById('current-stage').textContent = `Stage ${index + 1}/5`;
                
                currentStageIndex = index;
            }
            
            function showFeedback(stageId, isCorrect, message) {
                const feedbackElement = document.getElementById(`feedback-${stageId}`);
                feedbackElement.innerHTML = message;
                feedbackElement.className = `mt-4 p-3 rounded-lg text-center feedback-message show ${isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
                
                // Hide feedback after 3 seconds
                setTimeout(() => {
                    feedbackElement.classList.remove('show');
                }, 3000);
            }
            
            function isWithinTolerance(value, target, tolerancePercent) {
                const lowerBound = target * (1 - tolerancePercent / 100);
                const upperBound = target * (1 + tolerancePercent / 100);
                return value >= lowerBound && value <= upperBound;
            }
            
            // Initialize with Stage 1
            showStage(0);
            
            // Stage Navigation with Answer Checking
            document.getElementById('check-stage1').addEventListener('click', () => {
                const timeInput = parseFloat(document.getElementById('time-input').value);
                const distanceInput = parseFloat(document.getElementById('landing-marker').getAttribute('data-x'));
                const distanceValue = (distanceInput - 250) / 100; // Convert to meters
                
                const timeCorrect = isWithinTolerance(timeInput, correctAnswers.stage1.time, tolerance);
                const distanceCorrect = isWithinTolerance(distanceValue, correctAnswers.stage1.distance, tolerance);
                
                if (timeCorrect && distanceCorrect) {
                    showFeedback('stage1', true, '<strong>Correct!</strong> Great job understanding horizontal projectile motion!');
                    setTimeout(() => {
                        showStage(1);
                    }, 1500);
                } else {
                    let message = '<strong>Not quite right.</strong> ';
                    if (!timeCorrect) message += 'Check your time calculation. Remember that vertical motion is under gravity (9.8 m/s²). ';
                    if (!distanceCorrect) message += 'Check your distance calculation. Remember that horizontal motion is constant. ';
                    showFeedback('stage1', false, message);
                }
            });
            
            document.getElementById('back-to-stage1').addEventListener('click', () => {
                showStage(0);
            });
            
            document.getElementById('check-stage2').addEventListener('click', () => {
                const timeInput = parseFloat(document.getElementById('time-input-stage2').value);
                const distanceInput = parseFloat(document.getElementById('landing-marker-stage2').getAttribute('data-x'));
                const distanceValue = (distanceInput - 100) / 10; // Convert to meters
                
                const maxHeightInput = parseFloat(document.getElementById('max-height-marker').getAttribute('data-y'));
                const maxHeightValue = (350 - maxHeightInput) / 10; // Convert to meters
                
                const timeCorrect = isWithinTolerance(timeInput, correctAnswers.stage2.time, tolerance);
                const distanceCorrect = isWithinTolerance(distanceValue, correctAnswers.stage2.distance, tolerance);
                const maxHeightCorrect = isWithinTolerance(maxHeightValue, correctAnswers.stage2.maxHeight, tolerance);
                
                if (timeCorrect && distanceCorrect && maxHeightCorrect) {
                    showFeedback('stage2', true, '<strong>Excellent!</strong> You\'ve mastered angled projectile motion!');
                    setTimeout(() => {
                        showStage(2);
                    }, 1500);
                } else {
                    let message = '<strong>Not quite right.</strong> ';
                    if (!timeCorrect) message += 'Check your time calculation. ';
                    if (!distanceCorrect) message += 'Check your distance calculation. ';
                    if (!maxHeightCorrect) message += 'Check your maximum height calculation. ';
                    showFeedback('stage2', false, message);
                }
            });
            
            document.getElementById('back-to-stage2').addEventListener('click', () => {
                showStage(1);
            });
            
            document.getElementById('check-stage3').addEventListener('click', () => {
                const velocityInput = parseFloat(document.getElementById('velocity-input').value);
                
                const velocityCorrect = isWithinTolerance(velocityInput, correctAnswers.stage3.velocity, tolerance);
                
                if (velocityCorrect) {
                    showFeedback('stage3', true, '<strong>Perfect!</strong> You\'ve calculated the initial velocity correctly!');
                    setTimeout(() => {
                        showStage(3);
                    }, 1500);
                } else {
                    showFeedback('stage3', false, '<strong>Not quite right.</strong> Check your velocity calculation. Use the range equation and the given angle and time.');
                }
            });
            
            document.getElementById('back-to-stage3').addEventListener('click', () => {
                showStage(2);
            });
            
            document.getElementById('check-stage4').addEventListener('click', () => {
                const angleInput = parseFloat(document.getElementById('angle-input').value);
                
                const angleCorrect = isWithinTolerance(angleInput, correctAnswers.stage4.angle, tolerance);
                
                if (angleCorrect) {
                    showFeedback('stage4', true, '<strong>Outstanding!</strong> You\'ve solved the mystery angle!');
                    setTimeout(() => {
                        showStage(4);
                        createConfetti();
                    }, 1500);
                } else {
                    showFeedback('stage4', false, '<strong>Not quite right.</strong> Check your angle calculation. Remember the range equation and that there are two possible angles.');
                }
            });
            
            document.getElementById('play-again').addEventListener('click', () => {
                showStage(0);
            });
            
            // Draggable Markers
            function makeDraggable(element, minX, maxX, onDrag, verticalOnly = false) {
                let isDragging = false;
                let startX, startY;
                
                element.addEventListener('mousedown', startDrag);
                element.addEventListener('touchstart', startDrag, { passive: false });
                
                function startDrag(e) {
                    e.preventDefault();
                    isDragging = true;
                    
                    if (e.type === 'mousedown') {
                        startX = e.clientX;
                        startY = e.clientY;
                    } else {
                        startX = e.touches[0].clientX;
                        startY = e.touches[0].clientY;
                    }
                    
                    document.addEventListener('mousemove', drag);
                    document.addEventListener('touchmove', drag, { passive: false });
                    document.addEventListener('mouseup', endDrag);
                    document.addEventListener('touchend', endDrag);
                }
                
                function drag(e) {
                    if (!isDragging) return;
                    e.preventDefault();
                    
                    let clientX, clientY;
                    if (e.type === 'mousemove') {
                        clientX = e.clientX;
                        clientY = e.clientY;
                    } else {
                        clientX = e.touches[0].clientX;
                        clientY = e.touches[0].clientY;
                    }
                    
                    const rect = element.closest('svg').getBoundingClientRect();
                    const svgX = (clientX - rect.left) * (element.closest('svg').viewBox.baseVal.width / rect.width);
                    const svgY = (clientY - rect.top) * (element.closest('svg').viewBox.baseVal.height / rect.height);
                    
                    let newX = parseFloat(element.getAttribute('data-x'));
                    let newY = parseFloat(element.getAttribute('data-y') || element.transform.baseVal[0].matrix.f);
                    
                    if (verticalOnly) {
                        // Only update Y position
                        newY = svgY;
                        // Constrain Y position
                        newY = Math.max(100, Math.min(350, newY));
                    } else {
                        // Update X position
                        newX = parseFloat(element.getAttribute('data-x')) + (svgX - startX);
                        if (minX !== undefined && maxX !== undefined) {
                            newX = Math.max(minX, Math.min(maxX, newX));
                        }
                    }
                    
                    // Update marker position
                    element.setAttribute('transform', `translate(${newX}, ${newY})`);
                    element.setAttribute('data-x', newX);
                    element.setAttribute('data-y', newY);
                    
                    // Call the callback function if provided
                    if (onDrag) {
                        onDrag(newX, newY);
                    }
                    
                    startX = svgX;
                    startY = svgY;
                }
                
                function endDrag() {
                    isDragging = false;
                    document.removeEventListener('mousemove', drag);
                    document.removeEventListener('touchmove', drag);
                    document.removeEventListener('mouseup', endDrag);
                    document.removeEventListener('touchend', endDrag);
                }
            }
            
            // Stage 1 Landing Marker
            const landingMarker = document.getElementById('landing-marker');
            const landingDistanceDisplay = document.getElementById('landing-distance');
            
            makeDraggable(landingMarker, 250, 750, (x) => {
                const distance = ((x - 250) / 100).toFixed(2);
                landingDistanceDisplay.textContent = `${distance} meters`;
            });
            
            // Stage 2 Landing Marker
            const landingMarkerStage2 = document.getElementById('landing-marker-stage2');
            const landingDistanceStage2Display = document.getElementById('landing-distance-stage2');
            
            makeDraggable(landingMarkerStage2, 100, 700, (x) => {
                const distance = ((x - 100) / 10).toFixed(2);
                landingDistanceStage2Display.textContent = `${distance} meters`;
            });
            
            // Stage 2 Max Height Marker - Vertical movement only
            const maxHeightMarker = document.getElementById('max-height-marker');
            const maxHeightDisplay = document.getElementById('max-height-value');
            
            makeDraggable(maxHeightMarker, null, null, (x, y) => {
                const height = ((350 - y) / 10).toFixed(2);
                maxHeightDisplay.textContent = `${height} meters`;
            }, true); // true for vertical only
            
            // Confetti Animation for Reward Screen
            function createConfetti() {
                const confettiContainer = document.getElementById('confetti-container');
                confettiContainer.innerHTML = '';
                
                const colors = ['#FCD34D', '#34D399', '#60A5FA', '#F87171', '#A78BFA'];
                
                // Create confetti pieces
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                    confetti.style.animationDelay = `${Math.random() * 5}s`;
                    confettiContainer.appendChild(confetti);
                }
                
                // Create fireworks
                setTimeout(() => {
                    createFireworks();
                }, 500);
            }
            
            function createFireworks() {
                const confettiContainer = document.getElementById('confetti-container');
                
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const fireworkX = 100 + Math.random() * 600;
                        const fireworkY = 100 + Math.random() * 200;
                        
                        const colors = ['#FCD34D', '#34D399', '#60A5FA', '#F87171', '#A78BFA'];
                        
                        // Create particles for each firework
                        for (let j = 0; j < 30; j++) {
                            const particle = document.createElement('div');
                            particle.className = 'firework';
                            particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                            particle.style.left = `${fireworkX}px`;
                            particle.style.top = `${fireworkY}px`;
                            
                            const angle = Math.random() * Math.PI * 2;
                            const distance = 50 + Math.random() * 100;
                            const tx = Math.cos(angle) * distance;
                            const ty = Math.sin(angle) * distance;
                            
                            particle.style.setProperty('--tx', `${tx}px`);
                            particle.style.setProperty('--ty', `${ty}px`);
                            particle.style.animation = `explode ${0.5 + Math.random() * 1}s ease-out forwards`;
                            
                            confettiContainer.appendChild(particle);
                        }
                    }, i * 800);
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'951f47d9c62c857f',t:'MTc1MDI5NjgzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
